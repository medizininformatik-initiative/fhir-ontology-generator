{
  "default": {
    "exclude": [
      {
        "match": {
          "target": "base.path",
          "exact": true,
          "pattern": "Resource.id"
        }
      },
      {
        "match": {
          "target": "base.path",
          "exact": true,
          "pattern": "Resource.meta"
        }
      },
      {
        "match": {
          "target": "base.path",
          "exact": true,
          "pattern": "Resource.implicitRules"
        }
      },
      {
        "match": {
          "target": "base.path",
          "exact": true,
          "pattern": "Resource.language"
        }
      },
      {
        "match": {
          "target": "base.path",
          "exact": true,
          "pattern": "DomainResource.contained"
        }
      },
      {
        "match": {
          "target": "base.path",
          "exact": true,
          "pattern": "DomainResource.modifierExtension"
        }
      },
      {
        "match": {
          "target": "base.path",
          "exact": true,
          "pattern": "Element.id"
        }
      },
      {
        "match": {
          "target": "base.path",
          "exact": true,
          "pattern": "BackboneElement.modifierExtension"
        }
      },
      {
        "match": {
          "target": "base.path",
          "pattern": "Meta"
        }
      },
      {
        "match": {
          "target": "id",
          "pattern": "\\.identifier"
        }
      }
    ]
  },
  "profiles": {
    "http://hl7.org/fhir/StructureDefinition/Condition": {
      "recommend": {
        "always": [
          {
            "match": {
              "target": "id",
              "pattern": "Condition.extension:ReferenzPrimaerdiagnose"
            }
          },
          {
            "match": {
              "target": "id",
              "pattern": "Condition.clinicalStatus"
            }
          },
          {
            "match": {
              "target": "id",
              "pattern": "Condition.verificationStatus"
            }
          },
          {
            "match": {
              "target": "id",
              "pattern": "Condition.code"
            }
          },
          {
            "match": {
              "target": "id",
              "pattern": "Condition.onset\\[x\\]"
            }
          },
          {
            "match": {
              "target": "id",
              "pattern": "Condition.abatement\\[x\\]"
            }
          },
          {
            "match": {
              "target": "id",
              "pattern": "Condition.recordedDate"
            }
          }
        ],
        "never": [
          {
            "match": {
              "target": "id",
              "pattern": "Condition.id"
            },
            "note": "is auto preselected for each resource in background - is the technical id - needed to link resources to a patient"
          },
          {
            "note": "is auto preselected for each resource in background",
            "match": {
              "target": "id",
              "pattern": "Condition.subject"
            }
          }
        ]
      }
    },
    "http://hl7.org/fhir/StructureDefinition/Consent": {
      "recommend": {
        "always": [
          {
            "match": {
              "target": "id",
              "exact":true,
              "pattern": "Consent.status"
            }
          },
          {
            "match": {
              "target": "id",
              "pattern": "Consent.dateTime"
            }
          },
          {
            "match": {
              "target": "id",
              "pattern": "Consent.source\\[x\\]"
            }
          },
          {
            "match": {
              "target": "id",
              "pattern": "Consent.policy"
            }
          },
          {
            "match": {
              "target": "id",
              "pattern": "Consent.provision"
            }
          },
          {
            "match": {
              "target": "id",
              "pattern": "Consent.category"
            }
          }
        ],
        "never": [
          {
            "match": {
              "target": "id",
              "pattern": "Consent.id"
            },
            "note": "is auto preselected for each resource in background - is the technical id - needed to link resources to a patient"
          },
          {
            "match": {
              "target": "id",
              "pattern": "Consent.patient"
            },
            "note": "is auto preselected for each resource in background"
          }
        ]
      }
    },
    "http://hl7.org/fhir/StructureDefinition/Encounter": {
      "recommend": {
        "always": [
          {
            "match": {
              "target": "id",
              "exact": true,
              "pattern": "Encounter.status"
            }
          },
          {
            "match": {
              "target": "id",
              "pattern": "Encounter.type"
            }
          },
          {
            "match": {
              "target": "id",
              "exact": true,
              "pattern": "Encounter.class"
            }
          },
          {
            "match": {
              "target": "id",
              "pattern": "Encounter.serviceType"
            }
          },
          {
            "match": {
              "target": "id",
              "pattern": "Encounter.period"
            },
            "note": "is auto preselected for each resource in background"
          }
        ],
        "never": [
          {
            "match": {
              "target": "id",
              "pattern": "Encounter.id"
            },
            "note": "is auto preselected for each resource in background - is the technical id - needed to link resources to a patient"
          },
          {
            "match": {
              "target": "id",
              "pattern": "Encounter.identifier"
            },
            "note": "is auto preselected in background by DUP pipeline coordinator if needed for DIMP step in data extraction pipeline"
          },
          {
            "match": {
              "target": "id",
              "pattern": "Encounter.subject"
            },
            "note": "is auto preselected for each resource in background"
          }
        ]
      }
    },
    "http://hl7.org/fhir/StructureDefinition/Medication": {
      "recommend": {
        "always": [
          {
            "match": {
              "target": "id",
              "pattern": "Medication.code"
            }
          },
          {
            "match": {
              "target": "id",
              "pattern": "Medication.ingredient"
            }
          }
        ],
        "never": [
          {
            "match": {
              "target": "id",
              "pattern": "Medication.id"
            },
            "note": "is auto preselected for each resource in background - is the technical id - needed to link resources to a patient"
          }
        ]
      }
    },
    "http://hl7.org/fhir/StructureDefinition/MedicationAdministration": {
      "recommend": {
        "always": [
          {
            "match": {
              "target": "id",
              "exact": true,
              "pattern": "MedicationAdministration.status"
            }
          },
          {
            "match": {
              "target": "id",
              "pattern": "MedicationAdministration.medication\\[x\\]"
            },
            "note": "the reference/link to medication is necessary to identify the Statement, as the code is in the Medication resource"
          },
          {
            "match": {
              "target": "id",
              "pattern": "MedicationAdministration.effective\\[x\\]"
            }
          }
        ],
        "never": [
          {
            "match": {
              "target": "id",
              "pattern": "MedicationAdministration.id"
            },
            "note": "is auto preselected for each resource in background - is the technical id - needed to link resources to a patient"
          },
          {
            "match": {
              "target": "id",
              "pattern": "MedicationAdministration.subject"
            },
            "note": "is auto preselected for each resource in background"
          }
        ]
      }
    },
    "http://hl7.org/fhir/StructureDefinition/MedicationRequest": {
      "recommend": {
        "always": [
          {
            "match": {
              "target": "id",
              "exact": true,
              "pattern": "MedicationRequest.status"
            }
          },
          {
            "match": {
              "target": "id",
              "pattern": "MedicationRequest.intent"
            }
          },
          {
            "match": {
              "target": "id",
              "pattern": "MedicationRequest.medication\\[x\\]"
            },
            "note": "the reference/link to medication is necessary to identify the Statement, as the code is in the Medication resource"
          },
          {
            "match": {
              "target": "id",
              "pattern": "MedicationRequest.authoredOn"
            }
          }
        ],
        "never": [
          {
            "match": {
              "target": "id",
              "pattern": "MedicationRequest.id"
            },
            "note": "is auto preselected for each resource in background - is the technical id - needed to link resources to a patient"
          },
          {
            "match": {
              "target": "id",
              "pattern": "MedicationRequest.subject"
            },
            "note": "is auto preselected for each resource in background"
          }
        ]
      }
    },
    "http://hl7.org/fhir/StructureDefinition/MedicationStatement": {
      "recommend": {
        "always": [
          {
            "match": {
              "target": "id",
              "exact": true,
              "pattern": "MedicationStatement.status"
            }
          },
          {
            "match": {
              "target": "id",
              "pattern": "MedicationStatement.medication\\[x\\]"
            },
            "note": "the reference/link to medication is necessary to identify the Statement, as the code is in the Medication resource"
          },
          {
            "match": {
              "target": "id",
              "pattern": "MedicationStatement.effective\\[x\\]"
            }
          }
        ],
        "never": [
          {
            "match": {
              "target": "id",
              "pattern": "MedicationStatement.id"
            },
            "note": "is auto preselected for each resource in background - is the technical id - needed to link resources to a patient"
          },
          {
            "match": {
              "target": "id",
              "pattern": "MedicationStatement.subject"
            },
            "note": "is auto preselected for each resource in background"
          }
        ]
      }
    },
    "http://hl7.org/fhir/StructureDefinition/Observation": {
      "recommend": {
        "always": [
          {
            "match": {
              "target": "id",
              "pattern": "Observation.code"
            }
          },
          {
            "match": {
              "target": "id",
              "pattern": "Observation.effective"
            },
            "reasonForSelection": "for most use cases a date is relevant for context"
          },
          {
            "match": {
              "target": "id",
              "pattern": "Observation.value\\[x\\]"
            },
            "reasonForSelection": "value usually part of Observation - each type of value contains the same information -> no further specification necessary"
          },
          {
            "match": {
              "target": "id",
              "pattern": "Observation.dataAbsentReason"
            },
            "reasonForSelection": "Might change the interpretation of the value -> should be included"
          },
          {
            "match": {
              "target": "id",
              "pattern": "Observation.interpretation"
            },
            "reasonForSelection": "Interpretation is important as value and reference values can vary between sites for the same Observation value"
          },
          {
            "match": {
              "target": "id",
              "pattern": "Observation.referenceRange"
            },
            "reasonForSelection": "Part of a standard observation value"
          }
        ],
        "never": [
          {
            "match": {
              "target": "id",
              "pattern": "Observation.id"
            },
            "note": "is auto preselected for each resource in background - is the technical id - needed to link resources to a patient"
          },
          {
            "match": {
              "target": "id",
              "pattern": "Observation.identifier:analyseBefundCode"
            }
          },
          {
            "match": {
              "target": "id",
              "pattern": "Observation.subject"
            },
            "note": "is auto preselected for each resource in background"
          }
        ]
      }
    },
    "http://hl7.org/fhir/StructureDefinition/Patient": {
      "include": [
        {
          "id": "Patient.address:Strassenanschrift.postalCode",
          "match": {
            "target": "id",
            "pattern": "Patient.address:Strassenanschrift.postalCode"
          }
        },
        {
          "id": "Patient.address:Strassenanschrift.country",
          "match": {
            "target": "id",
            "pattern": "Patient.address:Strassenanschrift.country"
          }
        }
      ],
      "exclude": [
        {
          "id": "Patient.name",
          "match": {
            "target": "id",
            "pattern": "Patient.name"
          }
        },
        {
          "id": "Patient.location",
          "match": {
            "target": "id",
            "pattern": "Patient.location"
          }
        },
        {
          "id": "Patient.identifier",
          "match": {
            "target": "id",
            "pattern": "Patient.identifier"
          }
        },
        {
          "id": "Patient.address",
          "match": {
            "target": "id",
            "pattern": "Patient.address"
          }
        },
        {
          "id": "Patient.link",
          "match": {
            "target": "id",
            "pattern": "Patient.link"
          }
        }
      ],
      "recommend": {
        "always": [
          {
            "match": {
              "target": "id",
              "pattern": "Patient.deceased\\[x\\]"
            }
          }
        ],
        "never": [
          {
            "match": {
              "target": "id",
              "pattern": "Patient.id"
            }
          },
          {
            "match": {
              "target": "id",
              "pattern": "Patient.identifier"
            },
            "note": "is auto preselected in background by DUP pipeline coordinator if needed for DIMP step in data extraction pipeline"
          },
          {
            "match": {
              "target": "id",
              "pattern": "Patient.gender"
            }
          },
          {
            "match": {
              "target": "id",
              "pattern": "Patient.birthDate"
            }
          },
          {
            "match": {
              "target": "id",
              "pattern": "Patient.name"
            }
          },
          {
            "match": {
              "target": "id",
              "pattern": "Patient.address"
            }
          }
        ]
      }
    },
    "https://www.medizininformatik-initiative.de/fhir/core/modul-person/StructureDefinition/PatientPseudonymisiert": {
      "include": [
        {
          "match": {
            "target": "id",
            "pattern": "Patient.identifier:PseudonymisierterIdentifier"
          }
        },
        {
          "match": {
            "target": "id",
            "pattern": "Patient.identifier:AnonymisierterIdentifier"
          }
        }
      ]
    },
    "http://hl7.org/fhir/StructureDefinition/Procedure": {
      "recommend": {
        "always": [
          {
            "match": {
              "target": "id",
              "exact": true,
              "pattern": "Procedure.status"
            }
          },
          {
            "match": {
              "target": "id",
              "pattern": "Procedure.code"
            }
          },
          {
            "match": {
              "target": "id",
              "pattern": "Procedure.subject"
            },
            "note": "is auto preselected for each resource in background"
          },
          {
            "match": {
              "target": "id",
              "pattern": "Procedure.performed\\[x\\]"
            },
            "note": "is auto preselected for each resource in background"
          },
          {
            "match": {
              "target": "id",
              "pattern": "Procedure.bodySite"
            }
          }
        ],
        "never": [
          {
            "match": {
              "target": "id",
              "pattern": "Procedure.id"
            },
            "note": "is auto preselected for each resource in background - is the technical id - needed to link resources to a patient"
          },
          {
            "match": {
              "target": "id",
              "pattern": "Procedure.subject"
            },
            "note": "is auto preselected for each resource in background"
          }
        ]
      }
    },
    "http://hl7.org/fhir/StructureDefinition/Specimen": {
      "exclude": [
        {
          "match": {
            "target": "id",
            "pattern": "Specimen.extension:gehoertZu"
          }
        }
      ],
      "recommend": {
        "always": [
          {
            "match": {
              "target": "id",
              "pattern": "Specimen.type"
            }
          },
          {
            "match": {
              "target": "id",
              "pattern": "Specimen.collection"
            }
          }
        ],
        "never": [
          {
            "match": {
              "target": "id",
              "pattern": "Specimen.id"
            },
            "note": "is auto preselected for each resource in background - is the technical id - needed to link resources to a patient"
          },
          {
            "match": {
              "target": "id",
              "pattern": "Specimen.patient"
            },
            "note": "is auto preselected for each resource in background"
          }
        ]
      }
    }
  }
}