{
    "resourceType": "StructureDefinition",
    "url": "http://dktk.dkfz.de/fhir/StructureDefinition/onco-core-Observation-TNMc",
    "version": "0.9.0",
    "name": "TNMc",
    "status": "active",
    "description": "Staging von Tumorerkrankungen nach der TNM-Klassifikation (klinisch) gemäß der aktuellen Ausgabe  AJCC",
    "fhirVersion": "4.0.0",
    "kind": "resource",
    "abstract": false,
    "type": "Observation",
    "baseDefinition": "http://hl7.org/fhir/StructureDefinition/Observation",
    "derivation": "constraint",
    "differential": {
        "element":  [
            {
                "id": "Observation.status",
                "path": "Observation.status",
                "mustSupport": true
            },
            {
                "id": "Observation.category.coding.system",
                "path": "Observation.category.coding.system",
                "min": 1,
                "fixedUri": "http://hl7.org/fhir/observation-category"
            },
            {
                "id": "Observation.category.coding.code",
                "path": "Observation.category.coding.code",
                "min": 1,
                "fixedCode": "laboratory"
            },
            {
                "id": "Observation.code",
                "path": "Observation.code",
                "mustSupport": true
            },
            {
                "id": "Observation.code.coding.system",
                "path": "Observation.code.coding.system",
                "min": 1,
                "fixedUri": "http://loinc.org"
            },
            {
                "id": "Observation.code.coding.code",
                "path": "Observation.code.coding.code",
                "min": 1,
                "fixedCode": "21908-9"
            },
            {
                "id": "Observation.subject",
                "path": "Observation.subject",
                "min": 1,
                "type":  [
                    {
                        "code": "Reference",
                        "targetProfile":  [
                            "http://dktk.dkfz.de/fhir/StructureDefinition/onco-core-Patient-Patient",
                            "http://dktk.dkfz.de/fhir/StructureDefinition/onco-core-Patient-Pseudonym"
                        ]
                    }
                ],
                "mustSupport": true
            },
            {
                "id": "Observation.focus",
                "path": "Observation.focus",
                "type":  [
                    {
                        "code": "Reference",
                        "targetProfile":  [
                            "http://hl7.org/fhir/StructureDefinition/Resource",
                            "http://dktk.dkfz.de/fhir/StructureDefinition/onco-core-Condition-Primaerdiagnose"
                        ]
                    }
                ],
                "mustSupport": true
            },
            {
                "id": "Observation.encounter",
                "path": "Observation.encounter",
                "type":  [
                    {
                        "code": "Reference",
                        "targetProfile":  [
                            "http://dktk.dkfz.de/fhir/StructureDefinition/onco-core-Encounter-Fall"
                        ]
                    }
                ]
            },
            {
                "id": "Observation.effective[x]",
                "path": "Observation.effective[x]",
                "short": "Datum der TNM-Dokumentation/Datum Befund",
                "definition": "Es handelt sich sinngemäß um das Datum, an welchem der Datensatz zum TNM angelegt wurde und welches auch als auswertungsrelevant anzusehen ist. Es ist i.d.R. mit dem Diagnosedatum identisch bzw. liegt nah zu diesem Datum.",
                "type":  [
                    {
                        "code": "dateTime"
                    }
                ],
                "mapping":  [
                    {
                        "identity": "ADT-GEKID",
                        "map": "TNM:TNM_Datum",
                        "comment": "TNM:TNM_Datum"
                    },
                    {
                        "identity": "ISO-11179",
                        "map": "urn:dktk:dataelement:2:3",
                        "comment": "urn:dktk:dataelement:2:3"
                    }
                ]
            },
            {
                "id": "Observation.value[x]",
                "path": "Observation.value[x]",
                "type":  [
                    {
                        "code": "CodeableConcept"
                    }
                ],
                "mustSupport": true,
                "binding": {
                    "strength": "required",
                    "description": "Gibt das Stadium des Tumors (nach \"Union internationale contre le cancer\") an",
                    "valueSet": "http://dktk.dkfz.de/fhir/onco/core/ValueSet/UiccstadiumVS"
                }
            },
            {
                "id": "Observation.value[x].coding.version",
                "path": "Observation.value[x].coding.version",
                "short": "TNM-Version",
                "definition": "Katalogversion des TNM",
                "min": 1,
                "binding": {
                    "strength": "extensible",
                    "description": "Katalogversion des TNM",
                    "valueSet": "http://dktk.dkfz.de/fhir/onco/core/ValueSet/TNMVersionVS"
                },
                "mapping":  [
                    {
                        "identity": "ADT-GEKID",
                        "map": "TNM:TNM_Version",
                        "comment": "TNM:TNM_Version"
                    },
                    {
                        "identity": "ISO-11179",
                        "map": "urn:dktk:dataelement:18:2",
                        "comment": "urn:dktk:dataelement:18:2"
                    }
                ]
            },
            {
                "id": "Observation.value[x].coding.code",
                "path": "Observation.value[x].coding.code",
                "short": "UICC Stadium",
                "definition": "Gibt das Stadium des Tumors (nach \"Union internationale contre le cancer\") an",
                "min": 1,
                "mapping":  [
                    {
                        "identity": "ADT-GEKID",
                        "map": "TNM.TNM_T, TNM.TNM_N,  TNM.TNM_M",
                        "comment": "Berechnet aus 3 TNM Elementen"
                    },
                    {
                        "identity": "ISO-11179",
                        "map": "urn:dktk:dataelement:89:1",
                        "comment": "urn:dktk:dataelement:89:1"
                    }
                ]
            },
            {
                "id": "Observation.component",
                "path": "Observation.component",
                "slicing": {
                    "id": "394",
                    "discriminator":  [
                        {
                            "type": "value",
                            "path": "code.coding.code"
                        }
                    ],
                    "ordered": false,
                    "rules": "open"
                }
            },
            {
                "id": "Observation.component:TNM-T",
                "path": "Observation.component",
                "sliceName": "TNM-T",
                "max": "1",
                "mustSupport": true
            },
            {
                "id": "Observation.component:TNM-T.extension",
                "path": "Observation.component.extension",
                "slicing": {
                    "discriminator":  [
                        {
                            "type": "value",
                            "path": "url"
                        }
                    ],
                    "rules": "open"
                }
            },
            {
                "id": "Observation.component:TNM-T.extension:TNM-cpu-Praefix",
                "path": "Observation.component.extension",
                "sliceName": "TNM-cpu-Praefix",
                "type":  [
                    {
                        "code": "Extension",
                        "profile":  [
                            "http://dktk.dkfz.de/fhir/StructureDefinition/onco-core-Extension-TNMcpuPraefix"
                        ]
                    }
                ]
            },
            {
                "id": "Observation.component:TNM-T.code.coding.system",
                "path": "Observation.component.code.coding.system",
                "fixedUri": "http://loinc.org"
            },
            {
                "id": "Observation.component:TNM-T.code.coding.code",
                "path": "Observation.component.code.coding.code",
                "min": 1,
                "fixedCode": "21905-5"
            },
            {
                "id": "Observation.component:TNM-T.value[x]",
                "path": "Observation.component.value[x]",
                "short": "TNM-T",
                "definition": "Gibt die Ausdehnung (Ort und Größe) des Primärtumors an",
                "type":  [
                    {
                        "code": "CodeableConcept"
                    }
                ],
                "mustSupport": true,
                "binding": {
                    "strength": "required",
                    "description": "TNM-T",
                    "valueSet": "http://dktk.dkfz.de/fhir/onco/core/ValueSet/TNMTVS"
                },
                "mapping":  [
                    {
                        "identity": "ADT-GEKID",
                        "map": "TNM:TNM_T",
                        "comment": "TNM:TNM_T"
                    },
                    {
                        "identity": "ISO-11179",
                        "map": "urn:dktk:dataelement:100:1",
                        "comment": "urn:dktk:dataelement:100:1"
                    }
                ]
            },
            {
                "id": "Observation.component:TNM-N",
                "path": "Observation.component",
                "sliceName": "TNM-N",
                "max": "1",
                "mustSupport": true
            },
            {
                "id": "Observation.component:TNM-N.extension",
                "path": "Observation.component.extension",
                "slicing": {
                    "discriminator":  [
                        {
                            "type": "value",
                            "path": "url"
                        }
                    ],
                    "rules": "open"
                }
            },
            {
                "id": "Observation.component:TNM-N.extension:TNM-cpu-Praefix",
                "path": "Observation.component.extension",
                "sliceName": "TNM-cpu-Praefix",
                "type":  [
                    {
                        "code": "Extension",
                        "profile":  [
                            "http://dktk.dkfz.de/fhir/StructureDefinition/onco-core-Extension-TNMcpuPraefix"
                        ]
                    }
                ]
            },
            {
                "id": "Observation.component:TNM-N.code.coding.system",
                "path": "Observation.component.code.coding.system",
                "fixedUri": "http://loinc.org"
            },
            {
                "id": "Observation.component:TNM-N.code.coding.code",
                "path": "Observation.component.code.coding.code",
                "fixedCode": "21906-3"
            },
            {
                "id": "Observation.component:TNM-N.value[x]",
                "path": "Observation.component.value[x]",
                "short": "TNM-N",
                "definition": "Gibt an, ob Lymphknoten befallen sind",
                "type":  [
                    {
                        "code": "CodeableConcept"
                    }
                ],
                "mustSupport": true,
                "binding": {
                    "strength": "required",
                    "description": "TNM-N",
                    "valueSet": "http://dktk.dkfz.de/fhir/onco/core/ValueSet/TNMNVS"
                },
                "mapping":  [
                    {
                        "identity": "ADT-GEKID",
                        "map": "TNM:TNM_N",
                        "comment": "TNM:TNM_N"
                    },
                    {
                        "identity": "ISO-11179",
                        "map": "urn:dktk:dataelement:101:1",
                        "comment": "urn:dktk:dataelement:101:1"
                    }
                ]
            },
            {
                "id": "Observation.component:TNM-M",
                "path": "Observation.component",
                "sliceName": "TNM-M",
                "max": "1",
                "mustSupport": true
            },
            {
                "id": "Observation.component:TNM-M.extension",
                "path": "Observation.component.extension",
                "slicing": {
                    "discriminator":  [
                        {
                            "type": "value",
                            "path": "url"
                        }
                    ],
                    "rules": "open"
                }
            },
            {
                "id": "Observation.component:TNM-M.extension:TNM-cpu-Praefix",
                "path": "Observation.component.extension",
                "sliceName": "TNM-cpu-Praefix",
                "max": "1",
                "type":  [
                    {
                        "code": "Extension",
                        "profile":  [
                            "http://dktk.dkfz.de/fhir/StructureDefinition/onco-core-Extension-TNMcpuPraefix"
                        ]
                    }
                ],
                "mustSupport": true
            },
            {
                "id": "Observation.component:TNM-M.code.coding.system",
                "path": "Observation.component.code.coding.system",
                "fixedUri": "http://loinc.org"
            },
            {
                "id": "Observation.component:TNM-M.code.coding.code",
                "path": "Observation.component.code.coding.code",
                "fixedCode": "21907-1"
            },
            {
                "id": "Observation.component:TNM-M.value[x]",
                "path": "Observation.component.value[x]",
                "short": "TNM-M",
                "definition": "Gibt an, ob Metastasen vorliegen",
                "type":  [
                    {
                        "code": "CodeableConcept"
                    }
                ],
                "mustSupport": true,
                "binding": {
                    "strength": "required",
                    "description": "TNM-M",
                    "valueSet": "http://dktk.dkfz.de/fhir/onco/core/ValueSet/TNMMVS"
                },
                "mapping":  [
                    {
                        "identity": "ADT-GEKID",
                        "map": "TNM:TNM_M",
                        "comment": "TNM:TNM_M"
                    },
                    {
                        "identity": "ISO-11179",
                        "map": "urn:dktk:dataelement:99:1",
                        "comment": "urn:dktk:dataelement:99:1"
                    }
                ]
            },
            {
                "id": "Observation.component:TNM-y-Symbol",
                "path": "Observation.component",
                "sliceName": "TNM-y-Symbol",
                "max": "1",
                "mustSupport": true
            },
            {
                "id": "Observation.component:TNM-y-Symbol.code.coding.system",
                "path": "Observation.component.code.coding.system",
                "fixedUri": "http://loinc.org"
            },
            {
                "id": "Observation.component:TNM-y-Symbol.code.coding.code",
                "path": "Observation.component.code.coding.code",
                "min": 1,
                "fixedCode": "59479-6"
            },
            {
                "id": "Observation.component:TNM-y-Symbol.value[x]",
                "path": "Observation.component.value[x]",
                "short": "TNM-y-Symbol",
                "definition": "Gibt an, wann im Fall multimodaler Therapien mit vielfältigen Behandlungsansätzen die Klassifikation während oder nach diesen Therapien erfolgte",
                "min": 1,
                "type":  [
                    {
                        "code": "CodeableConcept"
                    }
                ],
                "binding": {
                    "strength": "required",
                    "description": "TNM y-Symbol",
                    "valueSet": "http://dktk.dkfz.de/fhir/onco/core/ValueSet/TNMySymbolVS"
                },
                "mapping":  [
                    {
                        "identity": "ADT-GEKID",
                        "map": "TNM:TNM_y_Symbol",
                        "comment": "TNM:TNM_y_Symbol"
                    },
                    {
                        "identity": "ISO-11179",
                        "map": "urn:dktk:dataelement:82:1"
                    }
                ]
            },
            {
                "id": "Observation.component:TNM-y-Symbol.value[x].coding.code",
                "path": "Observation.component.value[x].coding.code",
                "min": 1
            },
            {
                "id": "Observation.component:TNM-r-Symbol",
                "path": "Observation.component",
                "sliceName": "TNM-r-Symbol",
                "max": "1",
                "mustSupport": true
            },
            {
                "id": "Observation.component:TNM-r-Symbol.code.coding.system",
                "path": "Observation.component.code.coding.system",
                "fixedUri": "http://loinc.org"
            },
            {
                "id": "Observation.component:TNM-r-Symbol.code.coding.code",
                "path": "Observation.component.code.coding.code",
                "min": 1,
                "fixedCode": "21983-2"
            },
            {
                "id": "Observation.component:TNM-r-Symbol.value[x]",
                "path": "Observation.component.value[x]",
                "short": "TNM-r-Symbol",
                "definition": "Gibt an, ob es sich bei dem Tumor um ein beurteiltes Rezidiv handelt",
                "min": 1,
                "type":  [
                    {
                        "code": "CodeableConcept"
                    }
                ],
                "binding": {
                    "strength": "required",
                    "description": "TNM r-Symbol",
                    "valueSet": "http://dktk.dkfz.de/fhir/onco/core/ValueSet/TNMrSymbolVS"
                },
                "mapping":  [
                    {
                        "identity": "ADT-GEKID",
                        "map": "TNM:TNM_r_Symbol",
                        "comment": "TNM:TNM_r_Symbol"
                    },
                    {
                        "identity": "ISO-11179",
                        "map": "urn:dktk:dataelement:81:1"
                    }
                ]
            },
            {
                "id": "Observation.component:TNM-r-Symbol.value[x].coding.code",
                "path": "Observation.component.value[x].coding.code",
                "min": 1
            },
            {
                "id": "Observation.component:TNM-m-Symbol",
                "path": "Observation.component",
                "sliceName": "TNM-m-Symbol",
                "max": "1",
                "mustSupport": true
            },
            {
                "id": "Observation.component:TNM-m-Symbol.code.coding.system",
                "path": "Observation.component.code.coding.system",
                "fixedUri": "http://loinc.org"
            },
            {
                "id": "Observation.component:TNM-m-Symbol.code.coding.code",
                "path": "Observation.component.code.coding.code",
                "min": 1,
                "fixedCode": "42030-7"
            },
            {
                "id": "Observation.component:TNM-m-Symbol.value[x]",
                "path": "Observation.component.value[x]",
                "short": "TNM-m-Symbol",
                "definition": "Gibt an, ob multiple Primärtumoren in einem Bezirk vorliegen",
                "min": 1,
                "type":  [
                    {
                        "code": "CodeableConcept"
                    }
                ],
                "binding": {
                    "strength": "required",
                    "description": "TNM m-Symbol",
                    "valueSet": "http://dktk.dkfz.de/fhir/onco/core/ValueSet/TNMmSymbolVS"
                },
                "mapping":  [
                    {
                        "identity": "ADT-GEKID",
                        "map": "TNM:TNM_m_Symbol",
                        "comment": "TNM:TNM_m_Symbol"
                    },
                    {
                        "identity": "ISO-11179",
                        "map": "urn:dktk:dataelement:10:2"
                    }
                ]
            },
            {
                "id": "Observation.component:TNM-m-Symbol.value[x].coding.code",
                "path": "Observation.component.value[x].coding.code",
                "min": 1
            }
        ]
    }
}